<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | DREAMRS Lab</title>
    <link rel="icon" href="images/logo.png" type="image/png">
    <link href="./custom.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
</head>

<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300 min-h-screen">

    <!-- Login Section -->
    <div id="login-section" class="flex items-center justify-center min-h-screen">
        <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-xl w-full max-w-md">
            <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 text-center">Admin Login</h2>
            <form id="login-form">
                <div class="mb-4">
                    <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="username">
                        Username
                    </label>
                    <input
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        id="username" type="text" placeholder="Username">
                </div>
                <div class="mb-6">
                    <label class="block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2" for="password">
                        Password
                    </label>
                    <input
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        id="password" type="password" placeholder="******************">
                </div>
                <div class="flex items-center justify-between">
                    <button
                        class="bg-leaf hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full transition-colors"
                        type="submit">
                        Sign In
                    </button>
                </div>
                <p id="login-error" class="text-red-500 text-xs italic mt-4 hidden">Invalid username or password.</p>
            </form>
        </div>
    </div>

    <!-- Dashboard Section -->
    <div id="dashboard-section" class="hidden">
        <!-- Navbar -->
        <nav class="bg-white dark:bg-gray-800 shadow-md">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16">
                    <div class="flex">
                        <div class="flex-shrink-0 flex items-center gap-3">
                            <img src="images/logo.png" alt="DREAMRS Lab" class="admin-logo-img h-10 w-auto">
                            <span class="text-xl font-bold text-gray-800 dark:text-white">Admin Dashboard</span>
                        </div>
                    </div>
                    <div class="flex items-center">
                        <button id="logout-btn"
                            class="ml-4 px-4 py-2 rounded text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </nav>

        <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
            <!-- Tabs -->
            <div class="flex border-b border-gray-200 dark:border-gray-700 mb-6 overflow-x-auto">
                <button
                    class="tab-btn active px-4 py-2 text-sm font-medium text-leaf border-b-2 border-leaf focus:outline-none"
                    onclick="openTab('research')">Research</button>
                <button
                    class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent focus:outline-none"
                    onclick="openTab('team')">Team Members</button>
                <button
                    class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent focus:outline-none"
                    onclick="openTab('courses')">Courses</button>
                <button
                    class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent focus:outline-none"
                    onclick="openTab('openings')">Openings (PDFs)</button>
                <button
                    class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent focus:outline-none"
                    onclick="openTab('pi-profile')">PI Profile</button>
                <button
                    class="tab-btn px-4 py-2 text-sm font-medium text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 border-b-2 border-transparent focus:outline-none"
                    onclick="openTab('settings')">Settings</button>
            </div>

            <!-- Content Areas -->

            <!-- Research Tab -->
            <div id="research-tab" class="tab-content">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white">Publications</h3>
                        <button onclick="openPublicationModal()"
                            class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded text-sm">+ Add
                            Publication</button>
                    </div>
                    <div id="publications-list" class="space-y-4"></div>
                </div>

                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white">Collaborations</h3>
                        <button onclick="openCollabModal()"
                            class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded text-sm">+ Add
                            Collaboration</button>
                    </div>
                    <div id="collaborations-list" class="space-y-4"></div>
                </div>

                <!-- Projects Section -->
                <div class="mt-6 space-y-6">
                    <div class="flex justify-between items-center bg-white dark:bg-gray-800 p-4 rounded-lg shadow">
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white">Manage Projects</h3>
                        <div class="flex gap-2">
                            <button onclick="openProjectModal('funded')"
                                class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded text-sm">+ Add
                                Funded</button>
                            <button onclick="openProjectModal('other')"
                                class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded text-sm">+ Add
                                Other</button>
                        </div>
                    </div>

                    <!-- Funded Projects -->
                    <div id="admin-funded-section" class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">Funded Projects</h3>
                        </div>
                        <div id="funded-projects-list" class="space-y-4"></div>
                    </div>

                    <!-- Other Projects -->
                    <div id="admin-other-section" class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-medium text-gray-900 dark:text-white">Other Projects</h3>
                        </div>
                        <div id="other-projects-list" class="space-y-4"></div>
                    </div>
                </div>
            </div>

            <!-- Team Tab -->
            <div id="team-tab" class="tab-content hidden">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white">Team Members</h3>
                        <button onclick="openTeamModal()"
                            class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded text-sm">+ Add
                            Member</button>
                    </div>
                    <div id="team-list" class="space-y-6"></div>
                </div>
            </div>

            <!-- Courses Tab -->
            <div id="courses-tab" class="tab-content hidden">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-gray-900 dark:text-white">Courses</h3>
                        <button onclick="openCourseModal()"
                            class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded text-sm">+ Add
                            Course</button>
                    </div>
                    <div id="courses-list" class="space-y-4"></div>
                </div>
            </div>

            <!-- Openings Tab -->
            <div id="openings-tab" class="tab-content hidden max-w-2xl mx-auto">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-8">
                    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6 border-b dark:border-gray-700 pb-4">
                        General Opening Settings
                    </h3>
                    <div class="space-y-6">
                        <!-- Description PDF -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
                                Job Description / Details PDF
                            </label>
                            <div
                                class="flex flex-col gap-3 bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg border border-gray-200 dark:border-gray-600">
                                <input type="file" id="general-file" accept=".pdf"
                                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-leaf/10 file:text-leaf hover:file:bg-leaf/20 connection-action" />
                                <div id="general-current-file"
                                    class="flex items-center justify-between text-sm text-gray-500 dark:text-gray-400">
                                    <!-- Will be populated by JS -->
                                </div>
                            </div>
                        </div>

                        <!-- Application Link -->
                        <div>
                            <label class="block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">
                                Application Link (Google Form)
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor"
                                        viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1">
                                        </path>
                                    </svg>
                                </div>
                                <input type="url" id="general-link" placeholder="https://forms.google.com/..."
                                    class="w-full pl-10 border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:ring-2 focus:ring-leaf focus:border-transparent transition-all" />
                            </div>
                        </div>

                        <!-- Save Action -->
                        <div class="pt-4 flex justify-end">
                            <button onclick="saveGeneralOpening()"
                                class="bg-leaf hover:bg-green-600 text-white px-6 py-2.5 rounded-lg font-medium shadow-md transition-all hover:-translate-y-0.5">
                                Save Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- PI Profile Tab -->
            <div id="pi-profile-tab" class="tab-content hidden">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                    <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-6">Principal Investigator Profile
                    </h3>

                    <div class="space-y-4">
                        <!-- Formatting Toolbar -->
                        <div
                            class="flex flex-wrap gap-2 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600">
                            <!-- Text Formatting -->
                            <button type="button" onmousedown="event.preventDefault(); formatText('bold');"
                                class="px-3 py-2 bg-leaf text-white rounded hover:opacity-90 text-sm font-bold"
                                title="Bold (Ctrl+B)">
                                B
                            </button>
                            <button type="button" onmousedown="event.preventDefault(); formatText('italic');"
                                class="px-3 py-2 bg-leaf text-white rounded hover:opacity-90 text-sm italic"
                                title="Italic (Ctrl+I)">
                                I
                            </button>
                            <button type="button" onmousedown="event.preventDefault(); formatText('underline');"
                                class="px-3 py-2 bg-leaf text-white rounded hover:opacity-90 text-sm underline"
                                title="Underline (Ctrl+U)">
                                U
                            </button>
                            <button type="button" onmousedown="event.preventDefault(); formatText('strikeThrough');"
                                class="px-3 py-2 bg-leaf text-white rounded hover:opacity-90 text-sm line-through"
                                title="Strikethrough">
                                S
                            </button>

                            <div class="w-px bg-gray-300 dark:bg-gray-500 mx-1"></div>

                            <!-- Font Size -->
                            <select onchange="changeFontSize(this.value)"
                                class="px-2 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded text-sm text-gray-700 dark:text-gray-300"
                                title="Font Size">
                                <option value="">Size</option>
                                <option value="1">10px</option>
                                <option value="2">13px</option>
                                <option value="3">16px</option>
                                <option value="4">18px</option>
                                <option value="5">24px</option>
                                <option value="6">32px</option>
                                <option value="7">48px</option>
                            </select>

                            <!-- Font Color -->
                            <div class="flex items-center gap-1">
                                <input type="color" id="font-color-picker" value="#000000"
                                    class="w-8 h-8 rounded cursor-pointer border border-gray-300 dark:border-gray-600"
                                    title="Select Color">
                                <button type="button" onmousedown="saveSelection(); event.preventDefault();"
                                    onclick="applySelectedColor()"
                                    class="px-2 py-2 bg-gray-500 text-white rounded hover:opacity-90 text-xs"
                                    title="Apply Selected Color">
                                    Apply
                                </button>
                                <button type="button" onmousedown="saveSelection(); event.preventDefault();"
                                    onclick="toggleThemeColor()"
                                    class="px-2 py-2 bg-leaf text-white rounded hover:opacity-90 text-xs"
                                    title="Toggle Theme Color (apply/remove)">
                                    ðŸŽ¨
                                </button>
                            </div>

                            <div class="w-px bg-gray-300 dark:bg-gray-500 mx-1"></div>

                            <!-- Links -->
                            <button type="button" onmousedown="saveSelection(); event.preventDefault();"
                                onclick="toggleLink()"
                                class="px-3 py-2 bg-leaf text-white rounded hover:opacity-90 text-sm"
                                title="Insert/Remove Link (select text first)">
                                ðŸ”— Link
                            </button>
                        </div>

                        <!-- Editor -->
                        <div id="pi-content-editor" contenteditable="true"
                            class="min-h-64 p-4 border-2 border-gray-200 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 focus:border-leaf focus:outline-none"
                            style="min-height: 300px;">
                            <p><span class="text-leaf font-bold">Dr. Sonal Keshwani</span> is the Founder and Principal
                                Investigator of the Design Research and Human Factors Lab (<span
                                    class="text-leaf font-semibold">DREAMRS</span> Lab), Department of Human-Centered
                                Design, IIIT-Delhi. She holds a Ph.D. and an MSc in Design from <a
                                    href="https://dm.iisc.ac.in/cpdm/ideaslab/" class="text-leaf hover:underline">IDeaS
                                    Lab</a>, <a href="https://dm.iisc.ac.in/dm/"
                                    class="text-leaf hover:underline">Department of Design and Manufacturing</a>, <a
                                    href="https://iisc.ac.in/" class="text-leaf hover:underline">Indian Institute of
                                    Science (IISc), Bangalore</a> (2018), and a B.Tech in Production Engineering from
                                G.B. Pant University, Pantnagar (2008). Dr. Keshwani serves on the review boards of
                                several leading publications, including the Journal of Engineering Design (Taylor and
                                Francis), Research in Engineering Design (Springer), and the ASME IDETC conference. Her
                                research has been published in five international peer-reviewed SCI journals. She was
                                also a guest researcher at the Japan Advanced Institute of Science and Technology, where
                                she received the prestigious JASSO scholarship.</p>
                            <p class="mt-4">In addition to her research, Dr. Keshwani has fostered international
                                collaborations with institutions such as the Technical University of Denmark,
                                Politecnico di Milano, and Ariel University. She was a founding member of the School of
                                Design and Digital Transmedia at Dayananda Sagar University (DSU), Bangalore, where she
                                served from 2021 to 2023. Before transitioning to academia, Dr. Keshwani gained industry
                                experience working with Tata Motors Ltd. from 2008 to 2011.</p>
                        </div>

                        <p class="text-xs text-gray-500 dark:text-gray-400">
                            Tip: Select text first, then click a formatting button. Use ðŸŽ¨ to apply your theme color.
                        </p>

                        <!-- Save Button -->
                        <div class="pt-4 border-t dark:border-gray-700">
                            <button onclick="savePIContent()"
                                class="bg-leaf hover:opacity-90 text-white px-6 py-2 rounded text-sm">
                                Save PI Content
                            </button>
                            <span id="pi-save-status" class="ml-4 text-sm text-green-600 hidden">âœ“ Saved!</span>
                        </div>
                    </div>
                </div>

                <!-- Education Section -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Education</h3>
                        <button onclick="openEducationModal()"
                            class="bg-leaf hover:bg-leaf-dark text-white px-4 py-2 rounded text-sm transition-colors">
                            + Add Education
                        </button>
                    </div>
                    <div id="education-list" class="space-y-4">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Experience Section -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Academic Experience</h3>
                        <button onclick="openExperienceModal()"
                            class="bg-leaf hover:bg-leaf-dark text-white px-4 py-2 rounded text-sm transition-colors">
                            + Add Experience
                        </button>
                    </div>
                    <div id="experience-list" class="space-y-4">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Awards Section -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mt-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-xl font-semibold text-gray-800 dark:text-gray-200">Awards & Recognition</h3>
                        <button onclick="openAwardsModal()"
                            class="bg-leaf hover:bg-leaf-dark text-white px-4 py-2 rounded text-sm transition-colors">
                            + Add Award
                        </button>
                    </div>
                    <div id="awards-list" class="space-y-4">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Modals -->
            <!-- Education Modal -->
            <div id="education-modal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
                <div
                    class="bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-2xl shadow-xl max-h-[90vh] overflow-y-auto">
                    <h3 class="text-lg font-bold mb-4 dark:text-white" id="edu-modal-title">Add Education</h3>
                    <input type="hidden" id="edu-index">
                    <div class="space-y-4">
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Degree</label>
                            <input id="edu-degree" type="text" placeholder="e.g. Doctor of Philosophy (Ph.D.)"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Institution</label>
                            <input id="edu-institution" type="text"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Year/Period</label>
                            <input id="edu-year" type="text" placeholder="e.g. 2011â€“2018"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Details
                                (Optional)</label>
                            <div class="text-xs text-gray-500 mb-1">Use the main formatting toolbar at top if needed
                                (click inside box first)</div>
                            <div id="edu-details-editor" contenteditable="true"
                                onfocus="setActiveEditor('edu-details-editor')"
                                class="min-h-24 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:border-leaf">
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end gap-3">
                        <button onclick="closeEducationModal()"
                            class="px-4 py-2 bg-gray-200 dark:bg-gray-600 dark:text-white rounded hover:opacity-90">Cancel</button>
                        <button onclick="saveEducationItem()"
                            class="px-4 py-2 bg-leaf text-white rounded hover:opacity-90">Save</button>
                    </div>
                </div>
            </div>

            <!-- Experience Modal -->
            <div id="experience-modal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
                <div
                    class="bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-2xl shadow-xl max-h-[90vh] overflow-y-auto">
                    <h3 class="text-lg font-bold mb-4 dark:text-white" id="exp-modal-title">Add Experience</h3>
                    <input type="hidden" id="exp-index">
                    <div class="space-y-4">
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Role/Title</label>
                            <input id="exp-role" type="text"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Institution</label>
                            <input id="exp-institution" type="text"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Period</label>
                            <input id="exp-period" type="text" placeholder="e.g. July 2023 â€“ Present"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end gap-3">
                        <button onclick="closeExperienceModal()"
                            class="px-4 py-2 bg-gray-200 dark:bg-gray-600 dark:text-white rounded hover:opacity-90">Cancel</button>
                        <button onclick="saveExperienceItem()"
                            class="px-4 py-2 bg-leaf text-white rounded hover:opacity-90">Save</button>
                    </div>
                </div>
            </div>

            <!-- Awards Modal -->
            <div id="awards-modal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
                <div
                    class="bg-white dark:bg-gray-800 p-6 rounded-lg w-full max-w-2xl shadow-xl max-h-[90vh] overflow-y-auto">
                    <h3 class="text-lg font-bold mb-4 dark:text-white" id="award-modal-title">Add Award</h3>
                    <input type="hidden" id="award-index">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Title</label>
                            <input id="award-title" type="text"
                                class="w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        </div>
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Description/Details</label>
                            <div class="text-xs text-gray-500 mb-1">Use formatting toolbar for lists/bold etc.</div>
                            <div id="award-details-editor" contenteditable="true"
                                onfocus="setActiveEditor('award-details-editor')"
                                class="min-h-32 p-3 border rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white focus:outline-none focus:border-leaf">
                            </div>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-end gap-3">
                        <button onclick="closeAwardsModal()"
                            class="px-4 py-2 bg-gray-200 dark:bg-gray-600 dark:text-white rounded hover:opacity-90">Cancel</button>
                        <button onclick="saveAwardItem()"
                            class="px-4 py-2 bg-leaf text-white rounded hover:opacity-90">Save</button>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings-tab" class="tab-content hidden">
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6">
                    <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-6">Theme Settings</h3>

                    <div class="space-y-6">
                        <!-- Primary Color -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Primary Theme
                                Color</label>
                            <div class="flex items-center gap-4">
                                <input type="color" id="theme-color-picker" value="#16a34a"
                                    class="w-16 h-10 rounded cursor-pointer border-2 border-gray-300 dark:border-gray-600">
                                <input type="text" id="theme-color-hex" value="#16a34a"
                                    class="border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white w-32 uppercase"
                                    pattern="^#[0-9A-Fa-f]{6}$" maxlength="7">
                                <div id="theme-color-preview" class="w-10 h-10 rounded-lg shadow-inner"
                                    style="background-color: #16a34a;"></div>
                            </div>
                        </div>

                        <!-- Preset Colors -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Quick
                                Presets</label>
                            <div class="flex flex-wrap gap-2">
                                <button type="button" onclick="setThemeColor('#16a34a')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #16a34a;" title="Green (Default)"></button>
                                <button type="button" onclick="setThemeColor('#2563eb')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #2563eb;" title="Blue"></button>
                                <button type="button" onclick="setThemeColor('#7c3aed')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #7c3aed;" title="Purple"></button>
                                <button type="button" onclick="setThemeColor('#db2777')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #db2777;" title="Pink"></button>
                                <button type="button" onclick="setThemeColor('#ea580c')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #ea580c;" title="Orange"></button>
                                <button type="button" onclick="setThemeColor('#0891b2')"
                                    class="w-10 h-10 rounded-lg shadow hover:scale-110 transition-transform"
                                    style="background-color: #0891b2;" title="Cyan"></button>
                            </div>
                        </div>

                        <!-- Save Button -->
                        <div class="pt-4 border-t dark:border-gray-700">
                            <button onclick="saveThemeSettings()"
                                class="bg-leaf hover:bg-green-600 text-white px-6 py-2 rounded text-sm">
                                Save Theme Settings
                            </button>
                            <span id="theme-save-status" class="ml-4 text-sm text-green-600 hidden">âœ“ Saved!</span>
                        </div>
                    </div>
                </div>

                <!-- Logo Settings -->
                <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mt-6">
                    <h3 class="text-lg font-medium text-gray-900 dark:text-white mb-6">Logo Settings</h3>

                    <div class="space-y-6">
                        <!-- Current Logo Preview -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Current
                                Logo</label>
                            <div class="flex items-center gap-4">
                                <div
                                    class="w-24 h-24 rounded-lg border-2 border-gray-200 dark:border-gray-600 flex items-center justify-center overflow-hidden bg-gray-50 dark:bg-gray-700">
                                    <img id="current-logo-preview" src="images/logo.png" alt="Current Logo"
                                        class="max-w-full max-h-full object-contain">
                                </div>
                                <div class="text-sm text-gray-500 dark:text-gray-400">
                                    <p>Recommended: PNG with transparent background</p>
                                    <p>Max size: 10MB</p>
                                </div>
                            </div>
                        </div>

                        <!-- Upload New Logo -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Upload New
                                Logo</label>
                            <div class="flex items-center gap-4">
                                <input type="file" id="logo-file-input" accept="image/*"
                                    class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-leaf/10 file:text-leaf hover:file:bg-leaf/20">
                            </div>
                            <div id="logo-preview-container" class="mt-4 hidden">
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-2">New logo preview:</p>
                                <img id="new-logo-preview" src="" alt="New Logo Preview"
                                    class="max-w-32 max-h-32 object-contain rounded-lg border border-gray-200 dark:border-gray-600">
                            </div>
                        </div>

                        <!-- Save Button -->
                        <div class="pt-4 border-t dark:border-gray-700">
                            <button onclick="saveLogo()"
                                class="bg-leaf hover:opacity-90 text-white px-6 py-2 rounded text-sm">
                                Save Logo
                            </button>
                            <span id="logo-save-status" class="ml-4 text-sm text-green-600 hidden">âœ“ Logo Saved!</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- Modals -->

    <!-- Publication Modal -->
    <div id="publication-modal"
        class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-lg w-full max-h-screen overflow-y-auto">
            <h3 id="pub-modal-title" class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Add Publication</h3>
            <form id="pub-form" class="space-y-4">
                <input type="hidden" id="pub-index">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title</label>
                    <input type="text" id="pub-title"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Author</label>
                    <input type="text" id="pub-author"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Journal</label>
                    <input type="text" id="pub-journal"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Year</label>
                        <input type="number" id="pub-year"
                            class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                            required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Cited By</label>
                        <input type="text" id="pub-cited"
                            class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Link</label>
                    <input type="url" id="pub-link"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <!-- Image Upload -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Posters
                        (Images)</label>
                    <input type="file" id="pub-images" multiple accept="image/*"
                        class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-leaf/10 file:text-leaf hover:file:bg-leaf/20">
                    <div id="pub-current-images" class="mt-2 flex gap-2 flex-wrap"></div>
                </div>

                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeModal('publication-modal')"
                        class="px-4 py-2 border rounded text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button>
                    <button type="submit" class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Team Modal -->
    <div id="team-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-lg w-full">
            <h3 id="team-modal-title" class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Add Team Member</h3>
            <form id="team-form" class="space-y-4">
                <input type="hidden" id="team-index">
                <input type="hidden" id="team-old-category"> <!-- To track category changes -->

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Category</label>
                    <select id="team-category"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                        <option value="Principal Investigator">Principal Investigator</option>
                        <option value="PhD Scholars">PhD Scholars</option>
                        <option value="M.Tech Project Students">M.Tech Project Students</option>
                        <option value="B.Tech Project Students">B.Tech Project Students</option>
                        <option value="Independent Project Students">Independent Project Students</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name</label>
                    <input type="text" id="team-name"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Work Done /
                        Description</label>
                    <textarea id="team-work" rows="3"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        placeholder="Brief description of work done..."></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">LinkedIn</label>
                    <input type="url" id="team-linkedin"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Profile Image
                        (Optional)</label>
                    <input type="file" id="team-image" accept="image/*"
                        class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-leaf/10 file:text-leaf hover:file:bg-leaf/20">
                    <div id="team-current-image" class="mt-2"></div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">GitHub</label>
                    <input type="url" id="team-github"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeModal('team-modal')"
                        class="px-4 py-2 border rounded text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button>
                    <button type="submit" class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Course Modal -->
    <div id="course-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-lg w-full">
            <h3 id="course-modal-title" class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Add Course</h3>
            <form id="course-form" class="space-y-4">
                <input type="hidden" id="course-index">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Code</label>
                    <input type="text" id="course-code"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Title</label>
                    <input type="text" id="course-title"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description</label>
                    <textarea id="course-desc" rows="4"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Link</label>
                    <input type="url" id="course-link"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeModal('course-modal')"
                        class="px-4 py-2 border rounded text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button>
                    <button type="submit" class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Collab Modal -->
    <div id="collab-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-lg w-full">
            <h3 id="collab-modal-title" class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Add Collaboration
            </h3>
            <form id="collab-form" class="space-y-4">
                <input type="hidden" id="collab-index">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name</label>
                    <input type="text" id="collab-name"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Link</label>
                    <input type="url" id="collab-link"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Position</label>
                    <input type="text" id="collab-position"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Department</label>
                    <input type="text" id="collab-dept"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Department Link</label>
                    <input type="url" id="collab-dept-link"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeModal('collab-modal')"
                        class="px-4 py-2 border rounded text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button>
                    <button type="submit" class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Project Modal -->
    <div id="project-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg p-8 max-w-lg w-full max-h-screen overflow-y-auto">
            <h3 id="project-modal-title" class="text-xl font-bold mb-4 text-gray-900 dark:text-white">Add Project</h3>
            <form id="project-form" class="space-y-4">
                <input type="hidden" id="project-index">
                <input type="hidden" id="project-type"> <!-- 'funded' or 'other' -->

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Project Title</label>
                    <input type="text" id="project-title"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"
                        required>
                </div>

                <!-- Fields for Funded Projects -->
                <div id="project-agency-field">
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Funding Agency</label>
                    <input type="text" id="project-agency"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <div id="project-amount-field" class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Amount / Grant
                            No</label>
                        <input type="text" id="project-amount"
                            class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Duration/Year</label>
                        <input type="text" id="project-duration"
                            class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Description / Role</label>
                    <textarea id="project-desc" rows="3"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white"></textarea>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Link (Optional)</label>
                    <input type="url" id="project-link"
                        class="mt-1 block w-full border rounded px-3 py-2 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white">
                </div>

                <!-- Image Upload -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Project Image
                        (Optional)</label>
                    <input type="file" id="project-image" accept="image/*"
                        class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-leaf/10 file:text-leaf hover:file:bg-leaf/20">
                    <div id="project-current-image" class="mt-2"></div>
                </div>


                <div class="flex justify-end gap-3 mt-6">
                    <button type="button" onclick="closeModal('project-modal')"
                        class="px-4 py-2 border rounded text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700">Cancel</button>
                    <button type="submit" class="bg-leaf hover:bg-green-600 text-white px-4 py-2 rounded">Save</button>
                </div>
            </form>
        </div>
    </div>

    <script src="env.js"></script>
    <script src="admin.js"></script>
</body>

</html>